<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>phy++ API</title>
    <link rel="stylesheet" href="pygments.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  </head>
  <body>

  <div class="header">
  <i>phy</i><sub>++</sub> <span class="header-text">documentation</span>
  </div>

  <div class="page">
  <script src="menu-left.js"></script>
  <script src="menu-right.js"></script>

<div class="content">
<span class="section">Categories</span><br>
<div class="catlist">
<a href="category_support_05_os.html">OS interaction</a>
</div><br>
<span class="section">Signature</span>
<table style="signatures">
<tr><td><div class="highlight-sig"><pre><span class="n">string</span> <span class="n">system_var</span><span class="p">(</span><span class="n">string</span> <span class="n">v</span><span class="p">,</span> <span class="n">string</span> <span class="n">d</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div></td></tr>
</table>
<br><span class="section">Description</span><br>
<div class="description">
This function looks inside the operating system environment for a variable named <div class="highlight-inline"><pre><span class="n">v</span></pre></div> (using the C function <div class="highlight-inline"><pre><span class="n">getenv</span></pre></div>). If this variable exists, its value is returned as a string. Else, the default value <div class="highlight-inline"><pre><span class="n">d</span></pre></div> is returned (which is empty by default).
<br><br>
Environment variables are complementary to command line arguments: they are mostly used to store system specific configurations that usually only change from one machine (or user) to another. Because they seldom change, it would be tedious to have to specify these configurations as command line arguments and provide them for each call of a given program. Instead, environment variables are set once and for all at the beginning of the user's session (on Linux this is usually done in the <span class="fixed-width">.bashrc</span> file, or equivalent), and are read on demand by each program that needs them.
<br><br>
By convention and for portability issues, it is recommended to specify environment variable names in full upper case (i.e., <div class="highlight-inline"><pre><span class="s">&quot;PATH&quot;</span></pre></div> and not <div class="highlight-inline"><pre><span class="s">&quot;Path&quot;</span></pre></div> or <div class="highlight-inline"><pre><span class="s">&quot;path&quot;</span></pre></div>).
<br><br><span class="example">Example</span><br><hr>
<div class="highlight"><pre><span class="c1">// One typical use case is to get a path to some external component</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">sed_library_dir</span> <span class="o">=</span> <span class="n">system_var</span><span class="p">(</span><span class="s">&quot;SUPERFIT_LIB_PATH&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">sed_library_dir</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// This component is missing, try to do without or print an error</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// The directory has been provided, look what is inside...</span>
<span class="p">}</span>

<span class="c1">// It can also be used to modify generic behaviors, for example</span>
<span class="c1">// configure how many threads we want to use by default in all the</span>
<span class="c1">// programs of a given tool suite.</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">nthread_str</span> <span class="o">=</span> <span class="n">system_var</span><span class="p">(</span><span class="s">&quot;MYTOOLS_NTHREADS&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">);</span>
<span class="kt">uint_t</span> <span class="n">nthread</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">from_string</span><span class="p">(</span><span class="n">nthread_str</span><span class="p">,</span> <span class="n">nthread</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Oops, this is not a number...</span>
    <span class="c1">// Make sure to check this, as environment variables are always</span>
    <span class="c1">// given as strings, hence there is no guarantee that a variable</span>
    <span class="c1">// will always parse into a proper number.</span>
<span class="p">}</span>
</pre></div>
<hr><br>
</div>
</div>
  </div>
  </body>
</html>

